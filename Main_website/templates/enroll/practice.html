


{% load static %}



<style>
  .btn.btn-primary {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
  }
</style>



    <header class="header sticky-bar header-type1">
        <div class="container">
        <div class="main-header">
            <div class="header-logo"> <a class="d-flex" href="index.html"><img alt="luxride" src="{% static 'assets/imgs/template/logo.svg'%}"></a></div>
            <div class="header-menu"> 
            <div class="header-nav">
                <nav class="nav-main-menu d-none d-xl-block">
                <ul class="main-menu">
                    <li class="has-mega-menu"><a class="active" href="{% url 'home' %}">Home</a></li>
                    <li class="has-children"><a href="{% url 'shop' %}">Shop</a></li>
                    <li class="has-mega-menu"><a href="{% url 'product' %}">Products</a></li>
                    <li><a href="{% url 'contact' %}">Contact</a></li>
                </ul>
                </nav>
                <div class="burger-icon burger-icon-white"><span class="burger-icon-top"></span><span class="burger-icon-mid"></span><span class="burger-icon-bottom"></span></div>
            </div>
            </div>
            <div class="header-account"><a class="account-icon search" href="#">
                <svg class="d-inline-flex align-items-center justify-content-center" width="28" height="28" viewbox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_91_73)">
                    <path d="M20.031 18.617L24.314 22.899L22.899 24.314L18.617 20.031C17.0237 21.3082 15.042 22.0029 13 22C8.032 22 4 17.968 4 13C4 8.032 8.032 4 13 4C17.968 4 22 8.032 22 13C22.0029 15.042 21.3082 17.0237 20.031 18.617ZM18.025 17.875C19.2941 16.5699 20.0029 14.8204 20 13C20 9.132 16.867 6 13 6C9.132 6 6 9.132 6 13C6 16.867 9.132 20 13 20C14.8204 20.0029 16.5699 19.2941 17.875 18.025L18.025 17.875Z"></path>
                </g>
                <defs>
                    <clippath id="clip0_91_73">
                    <rect width="24" height="24" fill="white" transform="translate(2 2)"></rect>
                    </clippath>
                </defs>
                </svg></a><a class="account-icon account" href="#"> 
                <svg class="d-inline-flex align-items-center justify-content-center" width="28" height="28" viewbox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_116_451)">
                    <path d="M6 24C6 21.8783 6.84285 19.8434 8.34315 18.3431C9.84344 16.8429 11.8783 16 14 16C16.1217 16 18.1566 16.8429 19.6569 18.3431C21.1571 19.8434 22 21.8783 22 24H20C20 22.4087 19.3679 20.8826 18.2426 19.7574C17.1174 18.6321 15.5913 18 14 18C12.4087 18 10.8826 18.6321 9.75736 19.7574C8.63214 20.8826 8 22.4087 8 24H6ZM14 15C10.685 15 8 12.315 8 9C8 5.685 10.685 3 14 3C17.315 3 20 5.685 20 9C20 12.315 17.315 15 14 15ZM14 13C16.21 13 18 11.21 18 9C18 6.79 16.21 5 14 5C11.79 5 10 6.79 10 9C10 11.21 11.79 13 14 13Z"></path>
                </g>
                <defs>
                    <clippath id="clip0_116_451">
                    <rect width="24" height="24" fill="white" transform="translate(2 2)"></rect>
                    </clippath>
                </defs>
                </svg></a>
                {% if request.user.is_authenticated %}
                <a class="account-icon wishlist" href="#">

                  <span class="number-tag">{{total_wishlist_count}}</span>

                    <svg class="d-inline-flex align-items-center justify-content-center" width="28" height="28" viewbox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_116_452)">
                            <path d="M14.001 6.52898C16.35 4.41998 19.98 4.48998 22.243 6.75698C24.505 9.02498 24.583 12.637 22.479 14.993L13.999 23.485L5.52101 14.993C3.41701 12.637 3.49601 9.01898 5.75701 6.75698C8.02201 4.49298 11.645 4.41698 14.001 6.52898ZM20.827 8.16998C19.327 6.66798 16.907 6.60698 15.337 8.01698L14.002 9.21498L12.666 8.01798C11.091 6.60598 8.67601 6.66798 7.17201 8.17198C5.68201 9.66198 5.60701 12.047 6.98001 13.623L14 20.654L21.02 13.624C22.394 12.047 22.319 9.66498 20.827 8.16998Z"></path>
                        </g>
                        <defs>
                            <clippath id="clip0_116_452">
                                <rect width="24" height="24" fill="white" transform="translate(2 2)"></rect>
                            </clippath>
                        </defs>
                    </svg>
                </a>
                <a class="account-icon cart" href="#">

                  <span class="number-tag" id="cart-count">{{ total_cart_items }}</span>

                    <svg width="28" height="28" viewbox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                        <g clip-path="url(#clip0_116_450)">
                            <path d="M9 10V8C9 6.67392 9.52678 5.40215 10.4645 4.46447C11.4021 3.52678 12.6739 3 14 3C15.3261 3 16.5979 3.52678 17.5355 4.46447C18.4732 5.40215 19 6.67392 19 8V10H22C22.2652 10 22.5196 10.1054 22.7071 10.2929C22.8946 10.4804 23 10.7348 23 11V23C23 23.2652 22.8946 23.5196 22.7071 23.7071C22.5196 23.8946 22.2652 24 22 24H6C5.73478 24 5.48043 23.8946 5.29289 23.7071C5.10536 23.5196 5 23.2652 5 23V11C5 10.7348 5.10536 10.4804 5.29289 10.2929C5.48043 10.1054 5.73478 10 6 10H9ZM9 12H7V22H21V12H19V14H17V12H11V14H9V12ZM11 10H17V8C17 7.20435 16.6839 6.44129 16.1213 5.87868C15.5587 5.31607 14.7956 5 14 5C13.2044 5 12.4413 5.31607 11.8787 5.87868C11.3161 6.44129 11 7.20435 11 8V10Z"></path>
                        </g>
                        <defs>
                            <clippath id="clip0_116_450">
                                <rect width="24" height="24" transform="translate(2 2)"></rect>
                            </clippath>
                        </defs>
                    </svg>
                </a>
            </div>
            {% endif %}
            
        </div>
        </div>
    </header>
  
  
  <div class="mobile-header-active mobile-header-wrapper-style perfect-scrollbar">
    <div class="mobile-header-wrapper-inner">
      <div class="mobile-header-content-area">
        <div class="mobile-menu-head">
          <div class="box-head-1"><a class="link-underline mr-20 account-icon account" href="#">Login</a><a class="{% static 'link-underline account-icon account' %}" href="#">Sign Up</a><a class="close-mobile" href="#"><img src="{% static 'assets/imgs/template/icons/close.svg' %}" alt="Guza"></a></div>
          <div class="box-head-2"><a class="back-mobile" href="#"><img src="{% static 'assets/imgs/template/icons/back.svg' %}" alt="Guza"></a></div>
        </div>
        <div class="perfect-scroll">
          <div class="mobile-menu-wrap mobile-header-border">
            <nav>
              <ul class="mobile-menu font-heading">
                <li class="has-children"><a class="active" href="{% url 'home' %}">Home</a></li>
                <li class="has-children"><a href="{% url 'shop' %}">Shop</a></li>
                <li class="has-children"><a href="{% url 'product' %}">Products</a> </li>
                <li><a href="{% url 'contact' %}">Contact</a></li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>






  

  <div class="box-popup-cart">
    <div class="box-cart-overlay"></div>
    <div class="box-cart-wrapper"><a class="btn-close-popup" href="#">
        <svg class="icon-16 d-inline-flex align-items-center justify-content-center" fill="#111111" stroke="#111111" width="24" height="24" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg></a>
      <h5 class="mb-15">Your Cart {{ total_cart_items}} </h5>
      <p class="body-p2"><span class="text-17-medium">Free Shipping</span>on orders over<span class="text-17-medium">$200.00</span></p>
      <div class="box-progress-bar-block">
        <div class="progress">
          <div class="progress-bar" style="width: 35%"></div>
        </div>
      </div>



      <div class="box-products-cart">
        <div class="box-empty-cart d-none">
          <div class="icon-empty-cart"><img src="{% static 'assets/imgs/template/icons/empty-cart.svg'%}" alt="Guza"></div>
          <div class="info-empty-cart">
            <p class="text-17 neutral-medium-dark">Your cart is empty</p><a class="link-underline" href="#">Add from Wishlist</a>
          </div>
        </div>
        

        {% if Carts %}
        <div class="list-items-cart">
            {% for item in Carts %}
                <div class="item-cart">
                    {% if item.order_detail.product_detail.product.image %}
                        <div class="item-cart-image">
                            <img src="{{ item.order_detail.product_detail.product.image.url }}" alt="Product Image">
                        </div>
                    {% else %}
                        <div class="item-cart-image">
                            <img src="{% static 'assets/imgs/page/homepage32/cat3.png' %}" alt="Default Image">
                        </div>
                    {% endif %}

                    <div class="item-cart-info">
                        <div class="item-cart-info-1">
                            <a class="text-16-medium" href="#">{{ item.order_detail.product_detail.product.product }}</a>
                            <div class="box-info-size-color-product">
                                <p class="box-color">
                                    <span class="body-p2 neutral-medium-dark">Color:</span>
                                    <span class="body-p2 neutral-dark">
                                        {{ item.order_detail.product_detail.color }}
                                    </span>
                                </p>
                                <p class="box-size">
                                    <span class="body-p2 neutral-medium-dark">Size:</span>
                                    <span class="body-p2 neutral-dark">
                                        {{ item.order_detail.product_detail.size }}
                                    </span>
                                </p>
                            </div>
                            <p class="body-p2 d-block d-sm-none mb-8">${{ item.order_detail.product_detail.product.price }}</p>
                            <div class="box-form-cart">
                                <div class="form-cart detail-qty">

                                  <span class="minus minus-cart" onclick="minus_cart(this)" id="{{ item.order_detail.product_detail.product.id }}"></span>
                                  <input class="qty-val form-control" type="text" name="quantity" value="{{ item.quantity }}" min="1">
                                  <span class="plus plus-cart" onclick="plus_cart(this)" id="{{ item.order_detail.product_detail.product.id }}"></span>
                                    

                                </div>
                            </div>
                        </div>
                        <div class="item-cart-info-2">
                            <p class="body-p2 d-none d-sm-block">${{ item.order_detail.product_detail.product.price }}</p>
                            <a class="btn-remove-cart delete-cart-product" data-cart-product="{{ item.id }}" href="#"></a>

                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No product found.</p>
    {% endif %}
</div>


      

      <div class="box-fire">
        <div class="icon-fire body-p2">Checkout now 09:14 before theyâ€™re<span class="text-17-medium">GONE!</span></div>
      </div>
      <div class="d-flex align-items-center justify-content-between mt-25 mb-15">
        <h6 class="neutral-medium-dark">Subtotal</h6>
        <h6 class="neutral-dark">
          <span class="totalAmount-display" data-total-amount="waheed" >${% if total_amount %} {{total_amount}} {% else %} 0.0 {% endif %}</span>
        </h6>
      </div>
      <div class="box-button-popup-cart d-flex align-items-center justify-content-between"><a class="btn btn-border w-100 mr-5" href="cart.html">View Cart</a><a class="btn btn-black w-100 ml-5" href="{% url 'checkout' %}">Check Out</a></div>
    </div>
  </div>




  <div class="box-popup-wishlist">
    <div class="box-wishlist-overlay"></div>
    <div class="box-wishlist-wrapper"><a class="btn-close-popup" href="#">
      <svg class="icon-16 d-inline-flex align-items-center justify-content-center" fill="#111111" stroke="#111111" width="24" height="24" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></a>
      <h5 class="mb-15">Your Wishlist</h5>
      <div class="box-products-cart">
        <div class="box-empty-cart d-none">
          <div class="icon-empty-cart"><img src="{% static 'assets/imgs/template/icons/empty-cart.svg'%}" alt="Guza"></div>
          <div class="info-empty-cart">
            <p class="text-17 neutral-medium-dark">Your cart is empty</p><a class="link-underline" href="#">Add from Wishlist</a>
          </div>
        </div>
        <div class="list-items-cart">
  
          {% if wishlists %}
          {% for item in wishlists %}
            {% if item.user == request.user %}
              <div class="item-cart">
        
                {% if item.product.image %}
                  <div class="item-cart-image">
                    <img src="{{ item.product.image.url }}" alt="Guza">
                  </div>
                {% else %}
                  <div class="item-cart-image">
                    <img src="{% static 'assets/imgs/page/homepage32/cat3.png' %}" alt="Default Image">
                  </div>
                {% endif %} 
        
                <div class="item-cart-info">
                  <div class="item-cart-info-1"><a class="text-16-medium" href="#">{{ item.product.product }}</a>
                    <div class="box-info-size-color-product">
                      <p class="box-color"><span class="body-p2 neutral-medium-dark">Color:</span>
                        <span class="body-p2 neutral-dark">
                          {% for color in item.product.get_available_colors %}
                            {{ color }}{% if not forloop.last %}, {% endif %}
                          {% endfor %}
                        </span>
                      </p>
                      <p class="box-size"><span class="body-p2 neutral-medium-dark">Size:</span>
                        <span class="body-p2 neutral-dark">
                          {% for size in item.product.get_available_sizes %}
                            {{ size }}{% if not forloop.last %}, {% endif %}
                          {% endfor %}
                        </span>
                      </p>
                    </div>
                    <p class="body-p2 d-block d-sm-none mb-8">${{ item.product.price }}</p>
                    <div class="box-form-cart">
                      <div class="btn btn-black" onclick="addtocart({{ item.product.id }}, {{ item.quantity }})">Add to cart</div>
                    </div>
                  </div>
                  <div class="item-cart-info-2">
                    <p class="body-p2 d-none d-sm-block">${{ item.product.price }}</p>
                    <a class="btn-remove-cart delete-wishlist-product" data-wishlist-product="{{item.id}}" href="#"></a>
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        {% else %}
          <p>No product found.</p>
        {% endif %}
        </div>
      </div>
    </div>
  </div>




  <div class="box-popup-search ele-popup-search">
    <div class="box-search-overlay"></div>
    <div class="box-search-wrapper">
      <a class="btn-close-popup" href="#">
        <svg class="icon-16 d-inline-flex align-items-center justify-content-center" fill="#111111" stroke="#111111" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </a>
      <h5 class="mb-15">Search products</h5>
      <form id="search-form" action="{% url 'search' %}" method="GET">
        <div class="form-group">
          <select class="form-control arrow-select" name="category">
            <option value="">All Categories</option>
            <option value="Fashion">Fashion</option>
            <option value="Kids">Kids</option>
            <option value="Men's">Men's</option>
            <option value="Women's">Women's</option>
          </select>
        </div>
        <div class="form-group">
          <input class="form-control" placeholder="Search for items...." type="text" name="q">
          <button class="btn btn-primary mt-2 text-center" type="submit">search</button>
        </div>
      </form>
    
      <div id="search-results" class="box-products-search">
        <div class="box-list-product-search">
          {% for p in products %}
          <div class="item-product-search">
            <div class="cardProductStyle3 cardProductType03 cardProductType02 wow fadeInUp">
              <div class="cardImage">
                <a href="#">
                  <img class="imageMain" src="{{ p.image.url }}" alt="{{ p.product }}">
                  <img class="imageHover" src="{% static 'assets/imgs/template/icons/empty-cart.svg'%}" alt="{{ p.product }}">
                </a>
                <div class="button-select">
                  <a href="#">Select Options</a>
                </div>
                <div class="box-quick-button">
                  <a class="btn" href="#">
                    <svg class="d-inline-flex align-items-center justify-content-center" width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_116_452)">
                        <path d="M14.001 6.52898C16.35 4.41998 19.98 4.48998 22.243 6.75698C24.505 9.02498 24.583 12.637 22.479 14.993L13.999 23.485L5.52101 14.993C3.41701 12.637 3.49601 9.01898 5.75701 6.75698C8.02201 4.49298 11.645 4.41698 14.001 6.52898ZM20.827 8.16998C19.327 6.66798 16.907 6.60698 15.337 8.01698L14.002 9.21498L12.666 8.01798C11.091 6.60598 8.67601 6.66798 7.17201 8.17198C5.68201 9.66198 5.60701 12.047 6.98001 13.623L14 20.654L21.02 13.624C22.394 12.047 22.319 9.66498 20.827 8.16998Z" fill=""></path>
                      </g>
                      <defs>
                        <clipPath id="clip0_116_452">
                          <rect width="24" height="24" fill="white" transform="translate(2 2)"></rect>
                        </clipPath>
                      </defs>
                    </svg>
                  </a>
                  <a class="btn" href="#">
                    <svg class="d-inline-flex align-items-center justify-content-center" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_200_1102)">
                        <path d="M15.375 12.0416L19.5 16.1666L15.375 20.2916L14.1967 19.1133L16.31 16.9991L5.33333 17V15.3333H16.31L14.1967 13.22L15.375 12.0416ZM8.625 3.70831L9.80333 4.88665L7.69 6.99998H18.6667V8.66665H7.69L9.80333 10.78L8.625 11.9583L4.5 7.83331L8.625 3.70831Z" fill=""></path>
                      </g>
                      <defs>
                        <clipPath id="clip0_200_1102">
                          <rect width="20" height="20" fill="white" transform="translate(2 2)"></rect>
                        </clipPath>
                      </defs>
                    </svg>
                  </a>
                  <a class="btn preview-product" href="#">
                    <svg class="d-inline-flex align-items-center justify-content-center" width="28" height="28" viewBox="0 0 28 28" fill="" xmlns="http://www.w3.org/2000/svg">
                      <g clip-path="url(#clip0_91_73)">
                        <path d="M20.031 18.617L24.314 22.899L22.899 24.314L18.617 20.031C17.0237 21.3082 15.042 22.0029 13 22C8.032 22 4 17.968 4 13C4 8.032 8.032 4 13 4C17.968 4 22 8.032 22 13C22.0029 15.042 21.3082 17.0237 20.031 18.617ZM18.025 17.875C19.2941 16.5699 20.0029 14.8204 20 13C20 9.132 16.867 6 13 6C9.132 6 6 9.132 6 13C6 16.867 9.132 20 13 20C14.8204 20.0029 16.5699 19.2941 17.875 18.025L18.025 17.875Z" fill=""></path>
                      </g>
                      <defs>
                        <clipPath id="clip0_91_73">
                          <rect width="24" height="24" fill="white" transform="translate(2 2)"></rect>
                        </clipPath>
                      </defs>
                    </svg>
                  </a>
                </div>
              </div>
              <div class="cardInfo">
                <h6 class="text-16-medium">{{ p.product }}</h6>
                <p class="body-p2 cardDesc">${{ p.price }}</p>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
  



  <script type="text/javascript">



 

    // ==================================================   Get Cookies  ==============================================

    function getCookie(name) 
    {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();

                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    
    const csrftoken = getCookie('csrftoken');
        $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });


 // ==================================================  signup_form  ===============================================


    
    $(document).ready(function() 
    {
        $('#signup-form').on('submit', function(e) 
        {
            e.preventDefault();
            var formData = $(this).serialize();
            console.log('Signup form data:', formData);
    
            $.ajax({
                type: 'POST',
                url: "{% url 'signup' %}",
                data: formData,
                success: function(response) 
                {
                    console.log('Signup response:', response);
                    if (response.status === 'success') 
                    {
                        window.location.href = response.redirect_url;
                    } 
                    else 
                    {
                        alert(response.message);
                    }
                },
                error: function(xhr, status, error) 
                {
                    console.error('Signup error:', error);
                    console.error('Response:', xhr.responseText);
                    alert('An error occurred. Please try again.');
                }
            });
        });
    

  // ==================================================   Sign_form   ===============================================

        $('#signin-form').on('submit', function(e) 
        {
            e.preventDefault();
            var formData = $(this).serialize();
            console.log('Signin form data:', formData);
    
            $.ajax({
                type: 'POST',
                url: "{% url 'signin' %}",
                data: formData,
                success: function(response) 
                {
                    console.log('Signin response:', response);
                    if (response.status === 'success') 
                    {
                      window.location.href = response.redirect_url;
                    } 
                    else 
                    {
                      alert(response.message);
                    }
                },
                error: function(xhr, status, error) 
                {
                    console.error('Signin error:', error);
                    console.error('Response:', xhr.responseText);
                    alert('An error occurred. Please try again.');
                }
            });
        });
    });
    
    

</script>






<script type="text/javascript">
  
  // ==================================================Add_To_wishlist==================================================

      function addtowishlist(id) 
      {
        console.log("item ID is ", id);

          $.ajax({
              type: "GET",
              url: "{% url 'addtowishlist' %}",
              data: {
                  "id": id,
              },
              dataType: "json",
              beforeSend: function () 
              {
                  console.log("Adding to wishlist...");
              },
              success: function (response) 
              {
                console.log("Response received:", response);
                  if (response.bool === true) 
                  {
                      console.log("Added to wishlist...");
                      $(".wishlist .number-tag").text(response.wishlist_count);
                      location.reload();
                      if (response.total_wishlist_count !== undefined)
                       {
                        $("#wishlist-count").text(response.total_wishlist_count);
                    }
                  }
              },
              error: function (error) {
                  console.error("Error in AJAX request:", error);
              }
          });
      }


       // ==================================================Delete_from_wishlist========================================

      $(document).on("click",".delete-wishlist-product",function()
      {
        let wishlist_id = $(this).attr("data-wishlist-product")
        let this_val = $(this)
    
        console.log("wishlist_id is :",wishlist_id)
    
        $.ajax({
          type: "POST",
          url:"{% url  'deletefromwishlist' %}",
          data:{
            "id":wishlist_id,
            "csrfmiddlewaretoken": "{{ csrf_token }}"
          },
          dataType:"json",
          beforeSend:function()
          {
            console.log("delete product from wishlist...");
          },
          success: function(response) 
          {
            console.log(response);  
            $("#wishlist-list").html(response.data);
            console.log("item deleted...!");
            location.reload()
          }
          
        })
    })

    // ==================================================Add_To_Cart===================================================

    function addtocart(id, quantity) 
    {
        console.log("item ID is ", id);
        $.ajax({
            type: "GET",
            url: "{% url 'addtocart' %}",
            data: {
                "id": id,
                "item_quantity": quantity
            },
            dataType: "json",
            beforeSend: function () 
            {
                console.log("Adding to cart...");
            },
            success: function (response) 
            {
                console.log("waheed what about you thinking....");
                if (response.cart_count) 
                {
                    alert("Item already in cart");
                }
                if (response.bool === true) 
                {
                    console.log("Added to cart...");
                    if (response.cart_item !== undefined && response.total_cart_items  !== undefined) 
                    {
                        $("#cart-count").text(response.total_cart_items );
                        location.reload();
                    }
                    if (response.total_wishlist_count !== undefined) 
                    {
                      $("#wishlist-count").text(response.total_wishlist_count);

                      $('[data-wishlist-product="' + id + '"]').remove();
                    }
                } 
                else
                {
                    console.log("Item not found or couldn't be added to the cart.");
                }
            },
            error: function (error) 
            {
                console.error("Error in AJAX request:", error);
            }
        });
    }


    // ==================================================Delete_from_cart==============================================

    $(document).ready(function() 
    {
      $('.delete-cart-product').on('click', function(event) 
      {
          event.preventDefault();  
          var id = $(this).data('cart-product');
          deleteFromCart(id);
      });
  
      function deleteFromCart(id) 
      {
          console.log("Deleting item ID ", id);
          $.ajax({
              type: "POST",
              url: "{% url 'deletefromcart' %}",
              data: {
                  'id': id,
                  'csrfmiddlewaretoken': '{{ csrf_token }}' 
              },
              dataType: "json",
              beforeSend: function () 
              {
                console.log("Deleting from cart...");
              },
              success: function (response) 
              {
                  console.log("Response received:", response);
                  if (response.message) 
                  {
                      alert(response.message);
                      if (response.total_cart_items !== undefined) 
                      {
                          $("#cart-count").text(response.total_cart_items);
                          location.reload();  
                      }
                  } 
                  else 
                  {
                      console.log("Error in response:", response.error);
                  }
              },
              error: function (error) 
              {
                  console.error("Error in AJAX request:", error);
              }
          });
      }
  });
  
  // ==================================================  Cart_price  ==================================================

  function fetchCartPrice() 
  {
    $.ajax({
        type: 'GET',
        url: "{% url 'cart-price' %}",
        dataType: "json",
        success: function(response) 
        {
            console.log(response);

            if (response.amount !== undefined && response.total_amount !== undefined) 
            {
                var amount = parseFloat(response.amount);
                var total_amount = parseFloat(response.total_amount);

                $(".totalAmount-display").text(total_amount.toFixed(2));
                $("[data-total-amount='waheed']").text(total_amount.toFixed(2));

                console.log("Total Amount:", total_amount);
            } 
            else 
            {
                console.log("Amount or totalAmount not present in the response.");
            }
        },
        error: function(xhr, error, status) 
        {
            console.error("Error fetching cart prices:", error);
            console.log("Status:", status);
            console.log("XHR response:", xhr.responseText);
        }
    });
  }

  $(document).ready(function() 
  {
    fetchCartPrice();
  });


  function plus_cart(element) 
  {
    var id = $(element).attr("id").toString();
    console.log("id is =", id);

    $.ajax({
        type: "POST",
        url: "{% url 'plus-cart' %}",
        data: {
            "id": id,
            "csrfmiddlewaretoken": "{{ csrf_token }}"
        },
        success: function(response) 
        {
            console.log(response);
            if (response.quantity !== undefined) 
            {
                $("[data-amount-id='" + id + "']").html(response.amount);
                $("[data-total-amount='waheed']").html(response.total_amount);
                $(element).siblings(".qty-val").val(response.quantity);
            }
        }
    });
}


function minus_cart(element) 
{
  var id = $(element).attr("id").toString();
  console.log("id is =", id);

  $.ajax({
      type: "POST",
      url: "{% url 'minus-cart' %}",
      data: {
          "id": id,
          "csrfmiddlewaretoken": "{{ csrf_token }}"
      },
      success: function(response) 
      {
          console.log(response);
          if (response.quantity !== undefined) 
          {
              $("[data-amount-id='" + id + "']").html(response.amount);
              $("[data-total-amount='waheed']").html(response.total_amount);
              $(element).siblings(".qty-val").val(response.quantity);
          }
      }
  });
}




$(document).ready(function() 
{
  $('form').on('submit', function(event) 
  {
      event.preventDefault();
      
      $.ajax({
          url: $(this).attr('action'),
          method: 'GET',
          data: $(this).serialize(),
          success: function(response) 
          {
              $('#search-results').empty();
              
              if (response.products.length > 0) 
              {
                  response.products.forEach(function(product) 
                  {
                      var productHtml = `
                          <div class="item-product-search">
                              <div class="cardProductStyle3 cardProductType03 cardProductType02 wow fadeInUp">
                                  <div class="cardImage">
                                      <a href="#">
                                          <img class="imageMain" src="${product.image.url}" alt="${product.product}">
                                          <img class="imageHover" src="${product.image.url}" alt="${product.product}">
                                      </a>
                                      <div class="button-select">
                                          <a href="#">Select Options</a>
                                      </div>
                                      <div class="box-quick-button">
                                          <a class="btn" href="#">
                                              <!-- Add your SVG icons here -->
                                          </a>
                                      </div>
                                  </div>
                                  <div class="cardInfo">
                                      <h6 class="text-16-medium">${product.product}</h6>
                                      <p class="body-p2 cardDesc">$${product.price}</p>
                                  </div>
                              </div>
                          </div>
                      `;
                      $('#search-results').append(productHtml);
                  });
              } else {
                  $('#search-results').html('<p>No products found.</p>');
              }
          },
          error: function(xhr, status, error) 
          {
              console.log('AJAX request failed:', status, error);
          }
      });
  });
});

  </script>